<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CS Test</title>
</head>

<body>

<p>CUSTOM NUMBER FORMAT: 1-800-DAY-NITE</p>
<p>admin@800daynite.com</p>

<!-- Begin Mongoose Metrics Tracking Code -->
<script type="text/javascript">
var mm_c = 'd986c45ee7c6bdf8ddd08b18223a127a';
var mm_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
</script>
<script src="http://www.mongoosemetrics.com/jsfiles/js-correlation/mm-getvar.js">
</script>
<script type="text/javascript">
/* Custom Parameters */
/* MANDATORY default_number Setup Parameter DO NOT REMOVE */
var default_number=''; /* 10 Digits Only i.e. 8881234567 */
var overwrite_default_number='N';
var mm_debug = 1;
/* Custom Parameters */
</script>
<script type="text/javascript">
(function() {
var mm = document.createElement('script'); mm.type = 'text/javascript'; mm.async = 'true';
mm.src = unescape(mm_protocol + 'www.mongoosemetrics.com/jsfiles/js-correlation/mm-control.php%3F' + mm_variables);
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mm, s);

mm.onload = mm.onreadystatechange = (function() {
    mm_logError('[custom] checking for mm_cc cookie');

var mm_cc = get_c('mm_cc',null);

if (!mm_cc) {
    var url_cc = getURLVar('mm_campaign');
    mm_logError('[custom] no mm_cc cookie found, setting to:'+url_cc);
    set_c('mm_cc', url_cc, 720);
    mm_cc = url_cc;
} else {
    mm_logError('[custom] mm_cc cookie found: '+mm_cc);

}

mm_logError('[custom] mm_cc variable = '+mm_cc);

var starttime = new Date().getTime();
mm_logError('[custom] starting custom replacements at: '+starttime);

custom_replace();

var endtime = new Date().getTime();
mm_logError('[custom] finished custom replacements at: '+endtime);

function replaceSingleRegex1 (numToFindS, numToInsertS,numberFormatS){
    var fullExpressionS = "";
    var iterationS=new Array();
    if (numToFindS.substring(0,1) == '0'){
        var areaCode = numToFindS.substring(0,4);
        var exchange = numToFindS.substring(4,7);
        var remain = numToFindS.substring(7,11);
        var exchangeCombo = numToFindS + remain;    
        var areaCode2 = numToFindS.substring(0,5);
        var exchange2 = numToFindS.substring(5,8);
        var remain2 = numToFindS.substring(8,11);
        var exchangeCombo2 = numToFindS + remain2;              
    }else{
        var areaCode = numToFindS.substring(0,3);
        var exchange = numToFindS.substring(3,6);
        var remain = numToFindS.substring(6,10);
        var exchangeCombo = exchange + remain;
    }
    //alert (areaCode);
    //alert (exchange);
    //alert (remain);
    //alert (exchangeCombo);
    iterationS[0] = "\\(\\s?"+areaCode+"\\s?\\)[\\-\\.\\s]?"+exchange+"[\\-\\.\\s]?"+remain+"(?!\\d)(?=[<\\s\\.\\!\\?\\,]?)";
    iterationS[1] = "\\b"+areaCode+"\\s?[\\-\\.\\s]?"+exchange+"[\\-\\.\\s]?"+remain+"\\b(?!\\d)(?=[<\\s\\.\\!\\?\\,]?)";
    iterationS[2] = "\\b("+areaCode+"|"+areaCode2+")\\s("+exchange+"|"+exchange2+")\\s("+remain+"|"+remain2+")\\b(?!\\d)(?=[<\\s\\.\\!\\?\\,]?)";

    var iCountS = iterationS.length - 1;
    for (i=0;i<=iCountS;i++){
        if (i == 0){
            fullExpressionS = iterationS[i];            
        }else{
            fullExpressionS = fullExpressionS + "|" + iterationS[i];
        }
    }
    alert (fullExpressionS);
    inputS = new RegExp(fullExpressionS,"gi"); 
    if (numberFormatS > -1){
        outputS = formatnumber(numToInsertS,numberFormatS);
    }else{
        outputS = numToInsertS;     
    }
//  if (numToExclude){
//      replaceAll('xxxyyyxxx1');   
//  }
    domIterator(inputS, outputS);
    //document.body.innerHTML = document.body.innerHTML.replace(inputS,outputS); 

}

function custom_replace() {
    var ccfound = false;
    switch (mm_cc) {

  	// Day and Nite Pest Control
    case "b53880e0dd163131e112572601bd2c11":
            var ccfound = true;
        replaceSingleRegex1('8003296483', '844-494-7972');
        replaceSingleRegex1('800DAYNITE', '844-494-7972');
        break;
    case "8de84accc01f9a3247b2abdb20ff215e":
            var ccfound = true;
        replaceSingleRegex('8003296483', '844-494-7973');
        replaceSingleRegex('800DAYNITE', '844-494-7973');
        break;
// END Day and Nite Pest Control

  mm_logError(mm_cc+' was not found, no replacement occured');
    }
    if (ccfound) {
        mm_logError (mm_cc+' found, doing replacement');
    }
}
		});
})();
</script>

<!-- End Mongoose Metrics Tracking Code -->
</body>
</html>